---
title: "Planes, Trains, and Automobiles"
output: html_document
---

# Introduction

Today's blog post title comes from the 1987 classic [Planes, Trains, and Automobilies](https://en.wikipedia.org/wiki/Planes,_Trains_and_Automobiles) or [A Ticket for Two](https://de.wikipedia.org/wiki/Ein_Ticket_f%C3%BCr_Zwei) in German. I just got back from a whirlwind trip to the United States where I was in four cities in 10 days (San Francisco, CA, Chicago, IL, Cleveland, OH, and Princeton, WV) all with a starting and ending point of Paris, France. To accomplish all of this travel I took airplanes, trains (if you include the local [Chicago CTA](http://www.transitchicago.com/)), and automobiles. In this post we'll look at the most time and cost effective way to do this trip. There's no difficult math or modeling in this post, but it can give you an idea of the power of data manipulation and descriptive statistics in R using the package [dplyr](https://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html).

**TAKE AWAY POINTS FROM THIS POST**

* The package dplyr is a useful and clean way to organize data and get descriptive information.

* The package dplyr can also be used to create new columns to manipulate data.

* Don't fly from Cleveland, OH to Princeton, WV unless you have a lot of money to burn.


# Data

My data contains legs for four one-way trips: 1) San Francisco to Chicago, 2) Chicago to Cleveland, 3) Cleveland to Princeton, and 4) Princeton to Cleveland. I then found out the time and price for three methods of travel: 1) airplane, 2) train, and 3) automobile. For the airplane data, I took the cheapest one-way flight based on a search of a website that aggregates across airlines and included the price and estimated duration of the flight. Since there was no available flight into Princeton, WV my airport was Beckley, WV. For the train data, I used Amtrak train estimates taking the time and price of the first available, cheapest ticket. Since there was no available train into Princeton, WV my station was in Norfolk, VA. For the automobile data, I assumed you already had a car and were only paying for gas. I used the current national average of $2.29 and a car with an MPG of 22, which is roughly the average for a mid-sized non-hybrid car. Below is the data set.


```
## Warning in file(file, "rt"): cannot open file '2016-04-04_travel/
## data_travel.txt': No such file or directory
```

```
## Error in file(file, "rt"): cannot open the connection
```

```
## Error in if (is.null(data) || ncol(data) == 0) {: missing value where TRUE/FALSE needed
```


# Best Itinerary Based on Time

To find out the best itinerary based on time we can simply see which method within each leg has the shortest duration of travel. The code for how to do this is shown below. First I group by my origin and destination so I can look at each leg separately. To do this I use the "group_by()" verb. Then I filter my data so that within each leg I only keep the method with the shortest time, the minimum time. Intuitively this done via the "filter()" verb. I end by "ungroup()"ing the data so that any future analyses are on the whole data set, not specific to my groupings.


```r
library(dplyr)

itinerary_time = data %>%
  group_by(origin, destination) %>%
  filter(time == min(time)) %>%
  ungroup()
```

```
## Error in UseMethod("group_by_"): no applicable method for 'group_by_' applied to an object of class "function"
```


```
## Error in datatable(itinerary_time, options = list(pageLength = 4, dom = "tip"), : object 'itinerary_time' not found
```

```
## Error in eval(expr, envir, enclos): object 'itinerary_time' not found
```

```
## Error in eval(expr, envir, enclos): object 'itinerary_time' not found
```









